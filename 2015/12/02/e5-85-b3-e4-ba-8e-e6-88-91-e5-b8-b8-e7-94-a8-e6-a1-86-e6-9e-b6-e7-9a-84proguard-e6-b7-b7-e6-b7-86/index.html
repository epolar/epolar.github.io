<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="Eraise"><meta name="description" content="以前完全不懂得怎么混淆啊，一直感觉是很高端的技术，不过事实上就那样了，嗯，有的时候真拿那些奇怪的东西没办法，比如log4j，那就忽略吧！-ignorewarnings"><meta name="keywords" content="ProGuard,ProGuard混淆,常用框架ProGuard,常用框架混淆,混淆"><title>关于我常用框架的ProGuard混淆 · 我吃西瓜</title><link rel="icon" href="/favicon.ico"><link rel="canonical" href="http://eraise.xyz/2015/12/02/e5-85-b3-e4-ba-8e-e6-88-91-e5-b8-b8-e7-94-a8-e6-a1-86-e6-9e-b6-e7-9a-84proguard-e6-b7-b7-e6-b7-86/"><link rel="alternate" href="/atom.xml" title="我吃西瓜"><link rel="stylesheet" href="/fonts/iconfont/iconfont.css"><link rel="stylesheet" href="/css/style.css"><script type="text/javascript">var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?92ceb44df626dd88b7190057da6f94e0";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script type="text/javascript">(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'Your Google Analytics ID', 'auto');
ga('send', 'pageview');</script></head><body><div id="main"><header><a href="/." class="logo">我吃西瓜</a><ul class="nav"><li class="nav-link"><a href="/" target="_self">主页</a></li><li class="nav-link"><a href="/archives" target="_self">文章</a></li><li class="nav-link"><a href="/categories" target="_self">分类</a></li><li class="nav-link"><a href="/tags" target="_self">标签</a></li></ul></header><section id="container"><article class="post"><h1 class="post-title">关于我常用框架的ProGuard混淆</h1><span class="post-time">2015年12月2日</span><div class="post-content"><p>以前完全不懂得怎么混淆啊，一直感觉是很高端的技术，不过事实上就那样了，嗯，有的时候真拿那些奇怪的东西没办法，比如log4j，那就忽略吧！<span style="color: rgb(204, 120, 50); font-weight: bold; background-color: rgb(43, 43, 43); font-family: 宋体; font-size: 9pt; line-height: 1.5;">-ignorewarnings</span><div><br></div><div><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'宋体';font-size:9.0pt;"><br><a id="more"></a><br><span style="color:#808080;">##—————Begin: proguard configuration common for all Android apps ———-<br></span><span style="color:#cc7832;font-weight:bold;">-optimizationpasses </span>5<br><span style="color:#cc7832;font-weight:bold;">-dontusemixedcaseclassnames<br></span><span style="color:#cc7832;font-weight:bold;">-dontskipnonpubliclibraryclasses<br></span><span style="color:#cc7832;font-weight:bold;">-dontskipnonpubliclibraryclassmembers<br></span><span style="color:#cc7832;font-weight:bold;">-dontpreverify<br></span><span style="color:#cc7832;font-weight:bold;">-verbose<br></span><span style="color:#cc7832;font-weight:bold;">-dump </span>class_files.txt<br><span style="color:#cc7832;font-weight:bold;">-printseeds </span>seeds.txt<br><span style="color:#cc7832;font-weight:bold;">-printusage </span>unused.txt<br><span style="color:#cc7832;font-weight:bold;">-printmapping </span>mapping.txt<br><span style="color:#cc7832;font-weight:bold;">-optimizations </span>!code/simplification/arithmetic,!field/<em>,!class/merging/</em></pre></div></p>
<p><span style="color:#cc7832;font-weight:bold;">-allowaccessmodification<br></span><span style="color:#cc7832;font-weight:bold;">-keepattributes </span><em>Annotation</em><br><span style="color:#cc7832;font-weight:bold;">-renamesourcefileattribute </span>SourceFile<br><span style="color:#cc7832;font-weight:bold;">-keepattributes </span>SourceFile,LineNumberTable<br><span style="color:#cc7832;font-weight:bold;">-repackageclasses </span>‘’</p>
<p><span style="color:#cc7832;font-weight:bold;">-keep </span>public class <em> extends android.app.Activity<br><span style="color:#cc7832;font-weight:bold;">-keep </span>public class </em> extends android.app.Application<br><span style="color:#cc7832;font-weight:bold;">-keep </span>public class <em> extends android.app.Service<br><span style="color:#cc7832;font-weight:bold;">-keep </span>public class </em> extends android.content.BroadcastReceiver<br><span style="color:#cc7832;font-weight:bold;">-keep </span>public class <em> extends android.content.ContentProvider<br><span style="color:#cc7832;font-weight:bold;">-keep </span>public class </em> extends android.app.backup.BackupAgentHelper<br><span style="color:#cc7832;font-weight:bold;">-keep </span>public class * extends android.preference.Preference<br><span style="color:#cc7832;font-weight:bold;">-keep </span>public class com.android.vending.licensing.ILicensingService<br><span style="color:#cc7832;font-weight:bold;">-dontnote </span>com.android.vending.licensing.ILicensingService</p>
<p><span style="color:#808080;"># Explicitly preserve all serialization members. The Serializable interface<br></span><span style="color:#808080;"># is only a marker interface, so it wouldn’t save them.<br></span><span style="color:#cc7832;font-weight:bold;">-keepclassmembers </span>class * implements java.io.Serializable {<br><span style="color:#9876aa;">    static final long serialVersionUID;<br></span><span style="color:#9876aa;">    private static final java.io.ObjectStreamField[] serialPersistentFields;<br></span><span style="color:#9876aa;">    private void writeObject(java.io.ObjectOutputStream);<br></span><span style="color:#9876aa;">    private void readObject(java.io.ObjectInputStream);<br></span><span style="color:#9876aa;">    java.lang.Object writeReplace();<br></span><span style="color:#9876aa;">    java.lang.Object readResolve();<br></span>}</p>
<p><span style="color:#808080;"># Preserve all native method names and the names of their classes.<br></span><span style="color:#cc7832;font-weight:bold;">-keepclasseswithmembernames </span>class * {<br><span style="color:#9876aa;">    native &lt;methods&gt;;<br></span>}</p>
<p><span style="color:#cc7832;font-weight:bold;">-keepclasseswithmembernames </span>class * {<br><span style="color:#9876aa;">    public &lt;init&gt;(android.content.Context, android.util.AttributeSet);<br></span>}</p>
<p><span style="color:#cc7832;font-weight:bold;">-keepclasseswithmembernames </span>class * {<br><span style="color:#9876aa;">    public &lt;init&gt;(android.content.Context, android.util.AttributeSet, int);<br></span>}</p>
<p><span style="color:#808080;"># Preserve static fields of inner classes of R classes that might be accessed<br></span><span style="color:#808080;"># through introspection.<br></span><span style="color:#cc7832;font-weight:bold;">-keepclassmembers </span>class <em>*.R$</em> {<br><span style="color:#9876aa;">  public static &lt;fields&gt;;<br></span>}</p>
<p><span style="color:#808080;"># Preserve the special static methods that are required in all enumeration classes.<br></span><span style="color:#cc7832;font-weight:bold;">-keepclassmembers </span>enum <em> {<br><span style="color:#9876aa;">    public static <em>*[] values();<br></em></span><span style="color:#9876aa;">    public static </span></em> valueOf(java.lang.String);<br>}</p>
<p><span style="color:#cc7832;font-weight:bold;">-keep </span>public class <em> {<br><span style="color:#9876aa;">    public protected </span></em>;<br>}</p>
<p><span style="color:#cc7832;font-weight:bold;">-keep </span>class <em> implements android.os.Parcelable {<br><span style="color:#9876aa;">  public static final android.os.Parcelable$Creator </span></em>;<br>}<br><span style="color:#808080;">##—————End: proguard configuration common for all Android apps ———-</span><div><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'宋体';font-size:9.0pt;"><br><span style="color:#808080;">##———– RxJava ——–<br></span><span style="color:#cc7832;font-weight:bold;">-keep </span>class rx.schedulers.Schedulers {<br><span style="color:#9876aa;">    public static &lt;methods&gt;;<br></span>}<br><span style="color:#cc7832;font-weight:bold;">-keep </span>class rx.schedulers.ImmediateScheduler {<br><span style="color:#9876aa;">    public &lt;methods&gt;;<br></span>}<br><span style="color:#cc7832;font-weight:bold;">-keep </span>class rx.schedulers.TestScheduler {<br><span style="color:#9876aa;">    public &lt;methods&gt;;<br></span>}<br><span style="color:#cc7832;font-weight:bold;">-keep </span>class rx.schedulers.Schedulers {<br><span style="color:#9876aa;">    public static ** test();<br></span>}</pre></div></p>
<p><span style="color:#cc7832;font-weight:bold;">-keepclassmembers </span>class rx.internal.util.unsafe.<em>ArrayQueue</em>Field* {<br><span style="color:#9876aa;">    long producerIndex;<br></span><span style="color:#9876aa;">    long consumerIndex;<br></span>}</p>
<p><span style="color:#cc7832;font-weight:bold;">-keepclassmembers </span>class rx.internal.util.unsafe.BaseLinkedQueueProducerNodeRef {<br><span style="color:#9876aa;">    long producerNode;<br></span><span style="color:#9876aa;">    long consumerNode;<br></span>}<br><div><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'宋体';font-size:9.0pt;"><br><span style="color:#808080;">##—————Begin: proguard configuration for Gson  ———-<br></span><span style="color:#808080;"># Gson uses generic type information stored in a class file when working with fields. Proguard<br></span><span style="color:#808080;"># removes such information by default, so configure it to keep all of it.<br></span><span style="color:#cc7832;font-weight:bold;">-keepattributes </span>Signature</pre></div></p>
<p><span style="color:#808080;"># For using GSON @Expose annotation<br></span><span style="color:#cc7832;font-weight:bold;">-keepattributes </span><em>Annotation</em></p>
<p><span style="color:#808080;"># Gson specific classes<br></span><span style="color:#cc7832;font-weight:bold;">-keep </span>class sun.misc.Unsafe {<span style="color:#9876aa;"> <em>; </em></span>}<br><span style="color:#808080;">#-keep class com.google.gson.stream.** { ; }<br></span><span style="color:#808080;"><br></span><span style="color:#808080;"># Application classes that will be serialized/deserialized over Gson<br></span><span style="color:#cc7832;font-weight:bold;">-keep </span>class com.google.gson.examples.android.model.<em>* {<span style="color:#9876aa;"> </span></em>; }</p>
<p><span style="color:#cc7832;font-weight:bold;">-keep </span>class <strong>.pojo.</strong> {<span style="color:#9876aa;"><em>;</em></span>}<br><div><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'宋体';font-size:9.0pt;"><span style="color:#808080;">##——– ButterKnife ———<br></span><span style="color:#cc7832;font-weight:bold;">-keep </span>class butterknife.** {<span style="color:#9876aa;"> ; </span>}<br><span style="color:#cc7832;font-weight:bold;">-dontwarn </span>butterknife.internal.<strong><br><span style="color:#cc7832;font-weight:bold;">-keep </span>class </strong>$$ViewBinder {<span style="color:#9876aa;"> *; </span>}</pre></div></p>
<p><span style="color:#cc7832;font-weight:bold;">-keepclasseswithmembernames </span>class <em> {<br><span style="color:#9876aa;">    @butterknife.</span></em> &lt;fields&gt;;<br>}</p>
<p><span style="color:#cc7832;font-weight:bold;">-keepclasseswithmembernames </span>class <em> {<br><span style="color:#9876aa;">    @butterknife.</span></em> &lt;methods&gt;;<br>}<div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div></p>
</div></article><div class="tags"><a href="/tags/ProGuard/">ProGuard</a><a href="/tags/ProGuard混淆/">ProGuard混淆</a><a href="/tags/常用框架ProGuard/">常用框架ProGuard</a><a href="/tags/常用框架混淆/">常用框架混淆</a><a href="/tags/混淆/">混淆</a></div><div class="paginator"><a href="/2015/12/03/junit-e6-b5-8b-e8-af-95android/" class="prev"><i class="iconfont icon-left"></i><span> Prev</span></a><a href="/2015/10/28/android-4-4-sdk-int-19-e4-bb-a5-e5-90-8e-ef-bc-8c-e7-8a-b6-e6-80-81-e6-a0-8f-e7-9a-84-e9-80-8f-e6-98-8e/" class="next"><span>Next</span><i class="iconfont icon-right"></i></a></div><section id="comments"><div data-thread-key="http://eraise.xyz/2015/12/02/e5-85-b3-e4-ba-8e-e6-88-91-e5-b8-b8-e7-94-a8-e6-a1-86-e6-9e-b6-e7-9a-84proguard-e6-b7-b7-e6-b7-86/index.html" data-title="关于我常用框架的ProGuard混淆" data-url="http://eraise.xyz/2015/12/02/e5-85-b3-e4-ba-8e-e6-88-91-e5-b8-b8-e7-94-a8-e6-a1-86-e6-9e-b6-e7-9a-84proguard-e6-b7-b7-e6-b7-86/index.html" class="ds-thread"></div><script type="text/javascript">var duoshuoQuery = {short_name: "eraise" };
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
})();</script></section></section><footer><div class="social"><a href="mailto:eraise@qq.com" title="email" class="iconfont icon-email"></a><a href="https://github.com/epolar" title="github" class="iconfont icon-github"></a><a href="/atom.xml" title="rss" class="iconfont icon-rss"></a></div><div class="copyright"><p class="power">Powered by <a href="https://hexo.io/">Hexo</a> and Theme by <a href="https://github.com/ahonn/hexo-theme-even"> Even</a></p><p class="since">&copy;2016<span class="heart"><i class="iconfont icon-heart"></i></span><span class="author">Eraise</span></p></div><div id="back2top"><i class="iconfont icon-up"></i></div></footer></div><script src="/js/zepto.min.js"></script><script src="/js/theme.js"></script></body></html>